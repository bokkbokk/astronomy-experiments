<!DOCTYPE html>
<html>
    <head>
        <!-- init eruda js -->
        <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
        <script>eruda.init();</script>
        <style>
            canvas {
                image-rendering: pixelated;
            }
            /* center everything */
            body {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                margin: 0;
                flex-direction: column;
            }
        </style>
    </head>
    <!-- DIVIDER HEAD AND BODY -->
    <body style="background-color:#000000">
    <canvas id="myCanvas" width="500" height="500" style="border:1px solid #332c2c;background-color:#000000"></canvas>
    <button onclick="DRAW()">DRAW</button>
    <button onclick="CLEAR()">CLEAR</button>

    <script>
        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');

        function drawCircle(ctx, x, y, radius, fillColor, strokeColor, strokeWidth) {
            ctx.beginPath(); // Start a new path
            ctx.arc(x, y, radius, 0, 2 * Math.PI, false); // Create a full circle arc

            if (fillColor) {
                ctx.fillStyle = fillColor; // Set fill color if provided
                ctx.fill(); // Fill the circle
            }

            if (strokeColor && strokeWidth) {
                ctx.strokeStyle = strokeColor; // Set stroke color if provided
                ctx.lineWidth = strokeWidth; // Set line width if provided
                ctx.stroke(); // Draw the circle's outline
            }
        }

        function CLEAR(){
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        function DRAW(){
                for (w=0;w<=canvas.width;w++){
                    for (h=0;h<=1;h++){
                        // drawCircle(ctx,w,h,1,"blue");
                        // random color fill
                        let lum = randomNum(1,1.5)
                        drawCircle(ctx,randomNum(0,canvas.width),randomNum(0,canvas.height), randomNum(1,3), getRgb(randomNum(1,255) / lum,randomNum(1,255) / lum,randomNum(1,255) / lum) );
                        // drawCircle(ctx,w*5,h,7, randomColor(bcos(w),bcos(h),255) );
                        // drawCircle(ctx,w,h,1, getRgb(bcos(w*h),bcos(h*w),bcos(w*h) ));
                    }
                }
        }

        canvas.addEventListener('mousemove', handleMouseMove);
        function handleMouseMove(event) {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            // Clear the canvas
            // ctx.clearRect(0, 0, canvas.width, canvas.height);
            // // Draw a circle at the mouse position
            // drawCircle(ctx, x, y, 10, 'red');
            DRAW();
        }

        

        console.log("done loop")




        function bcos(x){
            // Make the wave visible: scale x and amplitude
            return 127.5 * Math.sin(.2*x)+127.5;
        }
        function getRgb(r,g,b){
            return 'rgb(' + r + ',' + g + ',' + b + ')';
        }
        function randomNum(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        function randomColor(r,g,b) {
            if (r && g && b) {
                return 'rgb(' + Math.floor(Math.random() * r) + ',' + Math.floor(Math.random() * g) + ',' + Math.floor(Math.random() * b) + ')';
            }
            return 'rgb(' + Math.floor(Math.random() * 256) + ',' + Math.floor(Math.random() * 256) + ',' + Math.floor(Math.random() * 256) + ')';
        }
    </script>
    </body>
</html>